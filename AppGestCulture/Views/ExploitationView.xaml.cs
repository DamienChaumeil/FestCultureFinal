using AppGestCulture.Data;
using AppGestCulture.Models;
using AppGestCulture.ViewModels;
using System.Data;

namespace AppGestCulture.Views
{
    public partial class ExploitationView : ContentPage
    {
        public ExploitationView()
        {
            InitializeComponent();
            ViewModel = new ExploitationViewModel(this.Navigation);
            BindingContext = ViewModel;
        }

        protected override async void OnAppearing()
        {
            await ViewModel.UpdateExploitationAsync();
            base.OnAppearing();
        }

        void OnExploitationTapped(object sender, ItemTappedEventArgs e)
        {
            if (e.Item==null)
            {
                return;
            }
            ViewModel.SelectExploitationCommand.Execute(e.Item);
            ((ListView)sender).SelectedItem = null;
        }
        public ExploitationViewModel ViewModel
        {
            get { return BindingContext as ExploitationViewModel; }
            set { BindingContext = value; }
        }
    }
}