using AppGestCulture.Data;
using AppGestCulture.Models;
using AppGestCulture.ViewModels;
using System.Data;

namespace AppGestCulture.Views
{

    public partial class ExploitationDetailsView : ContentPage
    {
        public ExploitationDetailsView(Exploitation exploitation)
        {
            InitializeComponent();
            ViewModel = new ExploitationDetailsViewModel(exploitation, this.Navigation);
            BindingContext = ViewModel;
        }
        protected override async void OnAppearing()
        {
            await ViewModel.UpdateParcelleAsync();
            base.OnAppearing();
        }

        void OnParcelleTapped(object sender, ItemTappedEventArgs e)
        {
            if (e.Item == null)
            {
                return;
            }
            ViewModel.SelectParcelleCommand.Execute(e.Item);
            ((ListView)sender).SelectedItem = null;
        }
        public ExploitationDetailsViewModel ViewModel
        {
            get { return BindingContext as ExploitationDetailsViewModel; }
            set { BindingContext = value; }
        }
    }
}